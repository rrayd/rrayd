"use strict";function getRandomFloat(e,t){return Math.random()*(t-e)+e}function getGroupWeight(){for(var e=0;e<2;e++)box_group_weight[e]=box_weight[e].reduce(function(e,t,g,o){return e+t})}function getLocalCoords(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}function libraCalcInit(e){var t=findTrigger(e);if("not-libra"==t){var g=document.body.getElementsByClassName("bags"),o=getLocalCoords(g[0]);g[0].appendChild(dragBag.elem),dragBag.elem.style.left=e.pageX-dragBag.shiftX-o.left+"px",dragBag.elem.style.top="",dragBag.elem.style.bottom="0px",libraCalc()}else{var a=document.body.getElementsByClassName(t),r=getLocalCoords(a[0]);a[0].appendChild(dragBag.elem),dragBag.elem.style.left=e.pageX-dragBag.shiftX-r.left+"px",dragBag.elem.style.top="",dragBag.elem.style.bottom="0",libraCalc()}}function findTrigger(e){var t,g=document.elementFromPoint(e.clientX,e.clientY);return t="drag-system-trigger dst-left"==g.className?"lt-left":"drag-system-trigger dst-right"==g.className?"lt-right":"not-libra",dst[0].hidden=!0,dst[1].hidden=!0,t}function libraCalc(){var e,t=[],g=[],o=[],a=document.body.getElementsByClassName("lt-left"),r=document.body.getElementsByClassName("lt-right"),i=[];o[0]=a[0].getElementsByClassName("bag").length,o[1]=r[0].getElementsByClassName("bag").length;for(var e=0;e<2;e++){t[e]=[];for(var l=0;l<o[e];l++)t[e][l]=0==e?+a[0].getElementsByClassName("bag")[l].dataset.weight:+r[0].getElementsByClassName("bag")[l].dataset.weight}for(var n=0;n<2;n++)1==t[n].length?(g[n]=+t[n],i[n]=getPerc(g[n])):t[n].length>1?(g[n]=0,i[n]=0,g[n]=t[n].reduce(function(e,t,g,o){return e+t}),i[n]=getPerc(g[n])):(g[n]=0,i[n]=0);getAxisDeg(i[0],i[1]),getPlatformBias(i[0],i[1])}function getPerc(e){return 100*e/box_all_group_weight}function getAxisDeg(e,t){var g=t-e;return g>=50?g=50:g<=-50&&(g=-50),g/=1.13,document.body.getElementsByClassName("libra-part-arrow")[0].style.transform="rotate("+g+"deg)",getPlatformBias(),g}function getPlatformBias(e,t){var g=t-e,o=[];g>=50?g=50:g<=-50&&(g=-50),g/=2,g*=1.28,Math.sign(g),o[0]=-1*g,o[1]=1*g,document.body.getElementsByClassName("libra-part-platform-right")[0].style.marginTop=o[1]+"px",document.body.getElementsByClassName("libra-part-platform-left")[0].style.marginTop=o[0]+"px"}document.ondragstart=function(){return!1},document.body.onselectstart=function(){return!1};var box_weight=[],box_group,box_number,box_weight_value;for(box_group=0;box_group<2;box_group++)for(box_weight[box_group]=[],box_number=0;box_number<6;box_number++)box_weight[box_group][box_number]=getRandomFloat(12,24);var box_group_weight=[],box_group_weight_diff;if(getGroupWeight(),box_group_weight[0]>box_group_weight[1]){box_group_weight_diff=box_group_weight[0]-box_group_weight[1],box_group_weight_diff/=6;for(var i=0;i<6;i++)box_weight[0][i]=box_weight[0][i]-box_group_weight_diff}if(box_group_weight[0]<box_group_weight[1]){box_group_weight_diff=box_group_weight[1]-box_group_weight[0],box_group_weight_diff/=6;for(var i=0;i<6;i++)box_weight[1][i]=box_weight[1][i]-box_group_weight_diff}getGroupWeight();var box_element=document.getElementsByClassName("bag"),box_cycle_id=0,box_cycle_group=0;for(i=0;i<12;i++)box_element[i].dataset.weight=box_weight[box_cycle_group][box_cycle_id],6==++box_cycle_id&&(box_cycle_group=1,box_cycle_id=0);var box_all_group_weight=box_group_weight[0]+box_group_weight[1],dragBag={};document.onmousedown=function(e){if(1==e.which){var t=e.target.closest(".bag");if(t){dragBag.elem=t,dragBag.elem.classList.remove("animated-bag"),dragBag.downX=e.pageX,dragBag.downY=e.pageY;var g=getLocalCoords(dragBag.elem);dragBag.shiftX=dragBag.downX-g.left,dragBag.shiftY=dragBag.downY-g.top}}};var dst=document.body.getElementsByClassName("drag-system-trigger");document.onmousemove=function(e){dragBag.elem&&(dst[0].hidden=!1,dst[1].hidden=!1,document.body.appendChild(dragBag.elem),dragBag.elem.style.zIndex=9e3,dragBag.elem.style.left=e.pageX-dragBag.shiftX+"px",dragBag.elem.style.top=e.pageY-dragBag.shiftY+"px")},document.onmouseup=function(e){dragBag.elem&&libraCalcInit(e),dragBag={}};